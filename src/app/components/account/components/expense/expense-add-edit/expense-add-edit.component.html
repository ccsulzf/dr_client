<!--  -->
<main id="expense-add-edit">
  <div class="expense-book">
    <expense-book-list name="expenseBook" [ngModel]="expenseBookId" (ngModelChange)="onSetExpenseBook($event)">
    </expense-book-list>
  </div>
  <section>
    <form #expenseForm="ngForm">
      <!-- 日期&支出地点 -->
      <div class="columns">
        <div class="column col-6">
          <dr-date [type]="'input'" [name]="'日期'" [nameShow]="true" [size]="'middle'" [viewType]="'day'"
            [initDate]="expenseDate" (setDate)="onSetDate($event)"></dr-date>
        </div>
        <div class="column col-6">
          <address-select name="address" [title]="'支出地点'" [(ngModel)]="addressId">
          </address-select>
        </div>
      </div>

      <!-- 支出类别&收款方 -->
      <div class="columns">
        <div class="column col-6">
          <expenseCategory-select [title]="'类别'" name="expenseCategory" [expenseBook]="expenseBook"
            [(ngModel)]="expenseCategoryId"></expenseCategory-select>
        </div>
        <div class="column col-6">
          <fund-party-select name="fund-party" [title]="'商家'" [type]="1" name="fund-party" [(ngModel)]="fundPartyId">
          </fund-party-select>
        </div>
      </div>

      <!-- 付款渠道&付款账户 -->
      <div class="columns">
        <div class="column col-6">
          <fundChannel-select name="fundChannel" [title]="'渠道'" [(ngModel)]="fundChannelId"></fundChannel-select>
        </div>
        <div class="column col-6">
          <fund-account-select name="fund-account" [title]="'账户'" [fundChannelId]="fundChannelId" [filterCredit]="false"
            [(ngModel)]="fundAccountId">
          </fund-account-select>
        </div>
      </div>


      <fieldset>
        <legend>支出明细</legend>
        <div class="columns">
          <div class="form-group column col-6">
            <input class="form-input" type="text" name="content" placeholder="支出内容" #contentInputEle
              [(ngModel)]="content">
          </div>
          <div class="column col-6">
            <div class="input-group">
              <input class="form-input" type="number" step="0.01" placeholder="支出金额" #amountInputEle name="amount"
                #amountInputEle [(ngModel)]="amount">
              <span class="input-group-addon">元</span>
            </div>
          </div>
        </div>
        <div class="columns detail">
          <participant-select [title]="'参与'" (setParticipantList)="onSetParticipantList($event)"
            [hasParticipantList]="participantList"></participant-select>
        </div>
        <div class="columns detail">
          <label-select [title]="'标签'" [type]="'1'" (setLabelList)="onSetLabelList($event)" [hasLabelList]="labelList">
          </label-select>
        </div>
        <div class="columns detail">
          <memo [title]="'备注'" [maxNumber]="500" [hasMemo]="memo" (setMemo)="onSetMemo($event)"></memo>
        </div>
      </fieldset>
    </form>
    <div class="dr-btn-group" *ngIf="!editOrDelFlag && addFlag">
      <button tabindex="-1" class="btn btn-primary" (click)="addExpense()">
        <i class="icon icon-plus"></i> 添加
        <p *ngIf="!expenseForm.valid">Counter is invalid!</p>
      </button>
      <button tabindex="-1" class="btn btn-Secondary" (click)="reset()">
        <i class="icon icon-refresh"></i> 重置
      </button>
    </div>
    <div class="edit-del" *ngIf="editOrDelFlag && !addFlag">
      <div class="dr-btn-group">
        <button tabindex="-1" class="btn btn-primary" (click)="editExpense()">
          <i class="icon icon-edit"></i> 编辑
        </button>
        <button tabindex="-1" class="btn btn-error" (click)="delExpense()">
          <i class="icon icon-delete"></i> 删除
        </button>
      </div>
      <button tabindex="-1" class="btn btn-link go-add" (click)="goAdd()">
        <i class="icon icon-share"></i> 添加支出
      </button>
    </div>
  </section>

</main>
